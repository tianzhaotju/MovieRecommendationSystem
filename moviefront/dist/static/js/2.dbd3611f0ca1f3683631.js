webpackJsonp([2],{c2lw:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s("mvHQ"),o=s.n(r),n=s("HNM5"),a={data:function(){var e=this;return{msg:"发送验证码",count:"",timer:null,show:!0,confirmCode:"",options:[],tags:[],dialogShow:!1,tipsShow:!1,formLabelWidth:"120px",registerInfo:{password:"",checkPass:"",phone:"",username:"",code:"",tags:[]},registerrules:{code:[{validator:function(e,t,s){if(!t)return s(new Error("请输入验证码"));s()},trigger:"blur"}],username:[{validator:function(e,t,s){""===t?s(new Error("请输入用户名")):/^\w+$/gi.test(t)?s():s(new Error("用户名必须由英文或者数字组成"))},trigger:"blur"}],password:[{validator:function(t,s,r){""===s?r(new Error("请输入密码")):(""!==e.registerInfo.checkPass&&e.$refs.registerInfo.validateField("checkPass"),r())},trigger:"blur"}],checkPass:[{validator:function(t,s,r){""===s?r(new Error("请再次输入密码")):s!==e.registerInfo.password?r(new Error("两次输入密码不一致!")):r()},trigger:"blur"}],phone:[{validator:function(e,t,s){return t?/^(0|86|17951)?(13[0-9]|15[012356789]|166|17[3678]|18[0-9]|14[57])[0-9]{8}$/.test(t)?void s():s(new Error("请输入正确的手机号")):s(new Error("请输入手机号"))},trigger:"blur"}]}}},mounted:function(){this.getUserTags(),this.addAnimation()},methods:{addAnimation:function(){var e=document.getElementsByClassName("registerForm")[0];e.classList.add("animated"),e.classList.add("bounceInDown")},sendCode:function(){var e=this;/^(0|86|17951)?(13[0-9]|15[012356789]|166|17[3678]|18[0-9]|14[57])[0-9]{8}$/.test(this.registerInfo.phone)&&(n.a.sendCode(this.registerInfo.phone).then(function(t){200===t.status&&0===t.data.code&&e.$message({message:"发送成功",type:"success"})}).catch(function(e){console.log(e)}),this.timer||(this.count=60,this.show=!1,this.timer=setInterval(function(){e.count>0&&e.count<=60?(e.count--,e.msg=e.count+"s后发送",0===e.count&&(e.msg="发送验证码")):(e.show=!0,clearInterval(e.timer),e.timer=null)},1e3)))},registerSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(e&&!t.tipsShow){var s={password:t.registerInfo.password,phone:t.registerInfo.phone,username:t.registerInfo.username,code:t.registerInfo.code,userTags:o()(t.registerInfo.tags)};n.a.userRegister(s).then(function(e){200===e.status&&(0===e.data.code?(t.$message({message:"注册成功",type:"success"}),t.$router.push({name:"login"})):t.$message({message:e.data.description,type:"warning"}))}).catch(function(e){t.$message({message:"注册失败",type:"error"})})}})},toLogin:function(){this.$router.push({name:"login"})},getUserTags:function(){var e=this;n.a.movieTags().then(function(t){200===t.status&&(0===t.data.code?e.tags=t.data.data:e.$message({message:t.data.msg,type:"warning"}))}).catch(function(t){e.$message({message:"获取标签失败",type:"warning"})})}}},i={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container"},[s("div",{staticClass:"registerForm"},[s("el-form",{ref:"registerInfo",staticClass:"registerRuleForm",attrs:{model:e.registerInfo,"status-icon":"",rules:e.registerrules,"label-width":"100px"}},[s("el-form-item",{attrs:{prop:"username"}},[s("el-input",{attrs:{type:"text","auto-complete":"off",placeholder:"用户名"},model:{value:e.registerInfo.username,callback:function(t){e.$set(e.registerInfo,"username",t)},expression:"registerInfo.username"}})],1),e._v(" "),s("el-form-item",{attrs:{prop:"password"}},[s("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"密码"},model:{value:e.registerInfo.password,callback:function(t){e.$set(e.registerInfo,"password",t)},expression:"registerInfo.password"}})],1),e._v(" "),s("el-form-item",{attrs:{prop:"checkPass"}},[s("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"确认密码"},model:{value:e.registerInfo.checkPass,callback:function(t){e.$set(e.registerInfo,"checkPass",t)},expression:"registerInfo.checkPass"}})],1),e._v(" "),s("el-form-item",{attrs:{prop:"phone"}},[s("el-input",{attrs:{placeholder:"手机号"},model:{value:e.registerInfo.phone,callback:function(t){e.$set(e.registerInfo,"phone",e._n(t))},expression:"registerInfo.phone"}})],1),e._v(" "),s("el-form-item",{attrs:{prop:"code"}},[s("el-input",{staticStyle:{width:"270px","padding-right":"10px"},attrs:{placeholder:"验证码"},model:{value:e.registerInfo.code,callback:function(t){e.$set(e.registerInfo,"code",e._n(t))},expression:"registerInfo.code"}}),e._v(" "),s("el-button",{on:{click:e.sendCode}},[e._v(e._s(this.msg))])],1),e._v(" "),s("el-form-item",{attrs:{prop:"registerTag"}},[s("span",{staticStyle:{float:"left"}},[e._v("请选择喜欢的电影类型：")]),e._v(" "),s("br"),e._v(" "),s("div",{staticClass:"mutli"},e._l(e.tags,function(t){return s("dd",{staticClass:"mutli"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.registerInfo.tags,expression:"registerInfo.tags"}],attrs:{type:"checkbox"},domProps:{value:t,checked:Array.isArray(e.registerInfo.tags)?e._i(e.registerInfo.tags,t)>-1:e.registerInfo.tags},on:{change:function(s){var r=e.registerInfo.tags,o=s.target,n=!!o.checked;if(Array.isArray(r)){var a=t,i=e._i(r,a);o.checked?i<0&&e.$set(e.registerInfo,"tags",r.concat([a])):i>-1&&e.$set(e.registerInfo,"tags",r.slice(0,i).concat(r.slice(i+1)))}else e.$set(e.registerInfo,"tags",n)}}}),e._v(e._s(t)+"\n            ")])}),0)]),e._v(" "),s("el-form-item",[s("el-button",{staticClass:"registerBtn",attrs:{type:"primary"},on:{click:function(t){return e.registerSubmit("registerInfo")}}},[e._v("注册")])],1)],1),e._v(" "),s("div",{staticClass:"footer-tip3",on:{click:e.toLogin}},[e._v("\n        已有账号?直接登录\n      ")])],1)])},staticRenderFns:[]};var c=s("VU/8")(a,i,!1,function(e){s("dxgC")},null,null);t.default=c.exports},dxgC:function(e,t){}});
//# sourceMappingURL=2.dbd3611f0ca1f3683631.js.map